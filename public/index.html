<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
   
  <script  src="https://code.jquery.com/jquery-3.5.1.js">
  </script>

     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
     <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
     <script src="https://kit.fontawesome.com/2475edd293.js"></script>
 
     <script src="https://dev.baltimorecountymd.gov/sebin/f/x/jquery.dataTables.js"></script>
     <script src="https://dev.baltimorecountymd.gov/sebin/f/h/dataTables.responsive.js"></script>
     <script src="https://dev.baltimorecountymd.gov/sebin/l/s/dotgov-responsivetable.min.js"></script>
     <script src="https://dev.baltimorecountymd.gov/sebin/z/m/dotgov-site.min.js"></script>
  
     <link
    rel="stylesheet"
    type="text/css"
    href="https://dev.baltimorecountymd.gov/sebin/j/f/dotgov.min.css"
  /> 
  

    <script type="text/javascript">
      $(document).ready(function() {
  console.log('ready----------------');

  var $responsiveTable = $("#responsive-main-table");
  $responsiveTable.DataTable(
    {
      info: true,
        paging: true,
        filter: true,
        processing: true,
        ordering:true,
      responsive:true,
      autoWidth: false,
      bJQueryUI: true,
      searching: true,
    
        order: [[1, "asc"]],
        columnDefs: [
          {
            targets: 0,
            orderable: false,
          },
        ],
  });
  // Setup - add a text input to each footer cell
  $('#responsive-main-table tfoot th').each(function() {
    var title = $(this).text();
    $(this).html('<input type="text" placeholder="Search ' + title + '" />');
  });


      $('.content').on('click', '#responsive-main-table tbody td.toggler' ,function (e) {
       
        $('.child-'+$(this).attr('data-prod-cat')).toggle();
        var dateVal =  $(this).attr('closure_date');
        var intersection =  $(this).attr('closure_intersection');
     var table = $('#responsive-main-table').DataTable();
 
   var tr = $(this).closest('tr');
   
        var row = table.row( tr );
 
        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Open this row
           row.child( format(dateVal,intersection) ).show();
            tr.addClass('shown');
        }
      });


 // $('.content').on('click', '#responsive-main-table tbody td.dtr-control' ,function (e) {
   // alert("onclick");
  //  e.preventDefault();
   //     $('.child'+$(this).attr('data-prod-cat')).toggle();
  //  var table = $('#responsive-main-table').DataTable();
 
  //  var tr = $(this).closest('tr');
   
  //       var row = table.row( tr );
 
  //       if ( row.child.isShown() ) {
  //           // This row is already open - close it
  //           row.child.hide();
  //           tr.removeClass('shown');
  //       }
  //       else {
  //           // Open this row
  //          row.child( format(row.data()) ).show();
  //           tr.addClass('shown');
  //       }
   
    // );
  // $.fn.dataTableExt.oJUIClasses.sSortColumn = 'sorting_1';
    
      // Add event listener for opening and closing details
 //$('#responsive-main-table tbody').on('click', 'tr td.dtr-control', function () {
  function format ( dateVal ,intersection) {
    // `d` is the original data object for the row
    return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+
        '<tr>'+
            '<td>Closed:</td>'+
            '<td>'+dateVal+'</td>'+
            
        '</tr>'+
        '<tr>'+
            '<td>Between:</td>'+
            '<td>'+intersection+'</td>'+
        '</tr>'
    
    '</table>';
}

 
  });

      </script> 
   
  </head>
  <body>
     <div id="root" class="content"></div>
          
      
  </body>

  <script type="text/javascript">
    
    </script>
</html>
