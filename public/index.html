<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
   
    <script  src="https://code.jquery.com/jquery-3.5.1.js"></script>
  
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.js"></script> -->

    <script type="text/javascript"  src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" async src ="https://cdn.datatables.net/responsive/2.2.6/js/dataTables.responsive.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css"></link>
    <link rel="stylesheet"  href="https://cdn.datatables.net/responsive/2.2.6/css/responsive.dataTables.min.css"></link>
  
   
   
    <title>React App</title>
    <script type = "text/javascript"> 
$(document).ready(function() {

  var $responsiveTable = $("#responsive-main-table");
  $responsiveTable.DataTable(
    {
      info: false,
        paging: false,
        bFilter: false,
        processing: true,
        ordering:true,
      responsive:true,
      autoWidth: false,
      bJQueryUI: true,
        order: [[1, "asc"]],
        columnDefs: [
          {
            targets: 0,
            orderable: false,
          },
        ],
  });

 // Add event listener for opening and closing details
 $('#responsive-main-table tbody').on('click', 'td.dtr-control', function () {
   console.log('inside click event');
        var tr = $(this).closest('tr');
        var responsiveTable = $("#responsive-main-table").DataTable();
        var row = responsiveTable.row( tr );
        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Open this row
           row.child( format(row.data()) ).show();
            tr.addClass('shown');
        }
    } );
  
  // $.fn.dataTableExt.oJUIClasses.sSortColumn = 'sorting_1';
     });
 //   window.onresize = function () {

  //     var responsiveTable = $("#responsive-main-table").DataTable();
  // var columns = responsiveTable.columns().count();
  // var w = this.innerWidth;
 
  // console.log("columns:" + columns);
  // for (i = 0; i < columns; i++) {
  //   var header = responsiveTable.column(i).header();
  //   //console.log("header:" + JSON.stringify(header));
  //  // console.log("header.innerHTML:" + header.innerHTML);
  //   if (header.innerHTML === "") {
  //     console.log("i:" + i  + "innerHTML==NONE");
  //     responsiveTable.column(i).visible(w > 700);
  //   }
    
  // }

  // var table = $('#responsive-main-table').DataTable();
  // var w = this.innerWidth;
  // table.column(5).visible( w > 700);
  // table.column(4).visible( w > 600);
  // table.column(3).visible( w > 500);
  // table.column(2).visible( w > 400);
  // table.column(1).visible( w > 300);  
//};
//trigger upon pageload
// $(window).trigger("resize");
/* Formatting function for row details - modify as you need */
function format ( d ) {
    // `d` is the original data object for the row
    return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+
        '<tr>'+
            '<td>Full name:</td>'+
            '<td>'+d.start_date+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Extension number:</td>'+
            '<td>'+d.extn+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Extra info:</td>'+
            '<td>And any further details here (images etc)...</td>'+
        '</tr>'+
    '</table>';
}
    </script>
  
  </head>
  <body>
    <div id="root"></div>
 

  </body>


</html>
